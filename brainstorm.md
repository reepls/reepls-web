# TODOS: ignore this

Are the recommended articles real?

Ilovemydreams1#

VITE_GIPHY_API_KEY

profiles: images (images/:userid/uuidfilename.ext)
banners: images (images/:userid/uuidfilename.ext)
post: images, videos (images/:userid/uuidfilename.ext, videos/:userid/uuidfilename.ext)
articles: thumbnails, images, documents (images/:userid/uuidfilename.ext, documents/:userid/uuidfilename.ext)

-server connection,
-cloudinary,

- useUser manage everything including invalidating the session and requesting login (should also happend when a critical action needs to be taken)
- invalidate session: delete token from local storage, clear the auth state, redirect to login
- ath of auth object is lastime the access token was refreshed so can redirect if expired
- Auth[AuthProvider.tsx, apiClient.tsx, useUser.tsx, userLayout/index.tsx, src/main.tsx]
  intercept reponse

  - How to draw attention to articles over posts?

-uploading media

- limit comment chars

cloudinary resources:
https://cloudinary.com/documentation/image_upload_api_reference
https://cloudinary.com/documentation/upload_images
https://cloudinary.com/documentation/authentication_signatures

# Errors Found:

- Recommended user and other recomended items have duplicates
- Comment with replies showing 0 reply count, comment with no replies showing >0 replies
- Find way to extract the actual error message from the backend not the generic axios error in react-query
- Inplace solution for empty id; just return an empty array but this whould be a temporary solution
- Too many requests(eg AuthorSuggestions)

- Popup when token expires (This should not happen regurlaly - current keeps trying to refresh token and is stuck and freezes the app)

# Considerations:

How to you extract the actual error message from the backend not the generic axios error in react-query (say when i do a mutation and it fails)? Right now i am just getting the error and error message like "Failed with status code 401"(bad request) which is from axios instead of the actual error message from the backend "User email already in use". I know it can be accessed on the axiosError with `error.response.data.error` but how do i get it in the mutation error?

Is there not supposed to be one QueryClient that is used throughout the app like the one in main.tsx? Because without that, things are behaving differently. Like there are some requests that will keep retrying indefinitely instead of all say retrying 3 times.

Something to look into: Both AuthProvider.tsx and apiClient.tsx are taking care of the token refresh. This should be handled
only by apiClient.tsx, right? Since that is the only one that makes the requests and can intercept the error and refresh the token.
AuthProvider should only be responsible for the auth state and not for the token refresh.

How to correctly handle authentication in react when it comes to jwts, access tokens and refresh tokens
using tanstack query, axios, and local storage

it's a really good idea to include a flag in your payloads, to indicate whether that token was generated by authenticating with user credentials, or by using a refresh token. You can use this flag to authorize sensitive operations, such as changing your password or making payments - so if the user didn't log in recently, you can prompt them to log in again for sensitive operations. I would say this is a must for most applications.

Some Resources:

- https://codevoweb.com/react-query-context-api-axios-interceptors-jwt-auth/
- https://medium.com/@kirankumal714/implementing-refresh-token-in-react-using-axios-zustand-and-react-query-a5dbac2944b6
- https://dev.to/elmehdiamlou/efficient-refresh-token-implementation-with-react-query-and-axios-f8d
- https://elazizi.com/posts/react-query-auth-token-refresh/
- https://akhilaariyachandra.com/blog/refreshing-an-authentication-in-token-in-tanstack-query
- https://dev.to/miracool/how-to-manage-user-authentication-with-react-js-3ic5
- Search: How to correctly handle authentication in react when it comes to jwts, access tokens and refresh tokens using tanstack query, axios, and local storage github
-

==========================================================================================================================

==========================================================================================================================

- Only see more if theere is more
- You dont need a toast for every success or error; just a few strategically placed ones

- Basic validation: comment should not be empty, comment should not be more than 255 characters,
- Comments should have see more and see less
- add profanity checking on frontend

- what shows on feed is recommended articles not all articles
- once user has viewed, it should not show in recommended articles or at least show with lower priority

- some data should be packaged from backend in one eg article data(article_data, ...reactions, ...comments,)
- loading icon

- group comments by author before rendering
- Refreshing not working well or something because requests keep failing
- Distinguish clearly btween what anonymous users can do and what logged in users can do

- if token refresh fails, redirect to login

- Way to extract the actual words from the html content so the TTS can read it

- Auto reize and compress images

Some Tasks for everyone:

-Implement a simple profanity filter with this package: https://www.npmjs.com/package/obscenity and reject post creation as needed based on the content profanity
-Put together the infrastructure for TTS with google cloud api but dont integrate it with in the service yet; the api will be provided soon for testing

Do cleanup: That means to go throughtout the site and remove the goffy things that were put there in development: for example,
-remove _unncessary_ console logs,
-change things like placeholders to appropariate ones,
-displaying the appropriate messages for example login failed because of incorrect password not saying eror 404etc,

- Adding default views when content is empty; for example, when there are no posts, when there are no comments, when there are no saved posts, nothing in the following feed, etc

Clean up the frontend: There is still a lot of problematic inconsistencies in the frontend: for example,
-the fonts for the text vs the titles are not showing as the design stipulates,
-some shadows are not applied such as the signin button in dark mode,
-the text colors are not properly applied sometimes like profile page text in dark mode, the feed page in dark mode as well,

- the input to collect the username has still not been implmentedyou have still no
- the profile page behaves oposite of what I expect: when you click on profile button to go to _YOUR_ profile page, it should goto profile/ and when you click on other user's profile button it should goto profile/otheruser'susername but currently it is the other way around
- States shopuld be updated properly: when i click on follwoing, it should show the 'following or unfollow' if it successfully follows, after saving should go to saved, etc
- i see lots of failing requests: fetching the user profile sometimes, reactions failing, commenting failing,
- The loading component being used is not good(i meaning like for posting, sending comment); use an icon or a proper spinner
- React on comment has not been implemented
- I should be able to close the comment box after posting a comment/opening it to read comments
- When i click to comment, the other comments should automatically load and show up
- We have to start thinking about the scrolling situation for the right sidebar/communiques
- on feed page some things show over the sidebar

Things I will do:

- Style the media viewer to look better
- Implement storage of media to cloudinary
- Complete the creation and viewing of posts

Final Ui

- As Fabrice mentioned, continue working on the admin dashboard

Modal, Dialog, Popover, Tooltip, Tabs, Slider,
Alerts and Toasts

-Reactions + confeti/indicaion

- react-hot-toast or react-toastify
- sweetalert2 or

# To env

- API_URL
- CLOUDINARY_URL
- CLOUDINARY_KEY
- CLOUDINARY_SECRET
- CLOUDINARY_PRESET
- CLOUDINARY_CLOUD_NAME

Problemss

- Check if online
- Load comments page by page
- There might be possibility fo xss attacks via editor????
- Alert for everything: account exits with email already in use,
- Should sideba r show when visiting other users [page?]

- Profile page and link disabled if not logged in

Do Next

- Fix the editor
- Be able to type and view drafts
- Connect to storage/ Setup storage
- Clean up styling
- Cleanup Layouts: Left Side bar | Top bar and then content | Right top barand its content
  -On upload of media, link should be persisted in case it needs to be deleted

Features to implement

==========================================

- Notifications (badge, content)
-

Small

- https://reactjs-tiptap-editor.vercel.app/guide/getting-started.html -https://templates.tiptap.dev/hzQHLtDMMD
- Relative position of the editor (check css) so that it does not gover navbar means that we cannot see the + and move block commands
- Edtior doaways: bubble menu, toolbar, the + & move, image/vid dialog (hidetoolbar),

-On click the communique expand and can be read; click another and this one closes

- clean adding thumnail image
- When the profile uid is missing, it means we are on the profile page of the current user
  (Allows for options like edit profile, change password, etc)
- When the profile uid is present, it means we are on the profile page of another user

- Only show reactions on click of react button
- Read alout in app language chosen at signup
- Reduce height pop over items
- Add cognitive mode icons
- Emoji picker dark mode
- Replace icons images with icon pack icons
- auth and other layoust moved accordinaly

-

Animated icons:

- https://icons.pqoqubbw.dev
- https://react.useanimations.com/

Editor Considerations

- use pure TipTap (if can find their immplementation)
- use Novel
- use reactjs-tiptap-editor library
  Refs:

- https://tailwindui.com/components/application-ui/overlays/modal-dialogs
- Popover: https://dev.to/said7388/how-to-create-a-popover-using-tailwind-css-13kj
- Tabs: https://devsimplified.hashnode.dev/tabs-in-reactjs-with-slider-animation

Editor command addtions

- search and replace
- emoji keyboard
- equation?
  Mobile
- Add image and video
- Fix link

To do

-
- -Demarkating what a logged in vs anonymous user can do
  -How should articles be demacarted for maximum engagement?
  -What makes a post a communique
  -Should always redirect to sign in on token fail

Congitive mode
Notifications
Search is not working properpy()
Share user profile

Posting works[Limit on length of subtitle, title, comments]

Reading History()

==============

Clean up work

1. The language picker in /auth to be like the one on the home page
2. On email login /auth/login/email, Button should be login with google since its a login page
3. The slidesow on /auth does not still have any images. the transition of the text under the slide show should
   also be improved if possible
4. It seems create account with google and login with google have not actually been implemented
5. Reduce/remove unnecessary console logs in the code base
6. See more/see less should only be visble when the actual content is too long
   7.Remove filler/default content: profile iomage/banner, [default about, bio, town on profile]
7. Feature: display the writers profile on th article view page? Add the ability to add comments, reactions to articles
8. Centralise the articles content on the page?
9.

For me

- Fetching users media
- uploading media from posting
-

Mobile
-Articles dont display their content but instead just the title and a link to continue reading where it rendered full page
-anonymous mood tries to load suggestions in search page causing errors
-remove filler info like recent seraches on search page or filler post on feed if currently there
-when signing up/in with google after signing redirects one to localhost:500/api-v1/... for some reason
-Display name not username

- I cannot sign in with email and password as i get an alet with 400 code fail after entering the verification code

- Verified badge immediately shows when I create an account/ is that a backend or frontend problem? - the account is not verified
  -Upgrade rebrand: replace the names to reepls and the logos as needed
- Should not be able to create empty content: comments, posts, articles, etc
- Support for non-Cameroonian phone numbers
- Backend: pleas use the user's name not email to generate the username
- When updating the profile, check that the username cannot have spaces; I am able to make my username have spaces (both frontend and backend)

When a user
-deletes a post (the correspoding media is in the media property)
-deletes an article(the correspoding media is in the media property)
-changes their profile picture
-changes their banner

it has to be removed from storages
To remove the media
-the filename is the media id which you can use to delete the media from cloudinary
-split the url of the media by / and take the last element; remove extension by splitting by . and taking first
-delete the resource by id using the cloudinary api; if it fails, ignore (make a log of it)

========

Clear the local stored article
No toast for reactions and comments
Animations for reactions
Sharing the link
Padding on article posting page
Play vids

Error boundary redesign
When fetching fails, always toast (eg, user with this username not found, etc)

Now I think of it, the platform should not have suported videos

Problems from backend: sending media as object, not changing the username, google auth,

preference should include user choosing to have cognitive mode on etc

---

-After changing profile, refresh the page and refetch the user because stuff has changed
-No importing from public
-profile settings is not autofilled like profile edit; infact why are the two differebt pages when doing the same thing? Keep /setting and both of them
direct to it
prevnt iinexyt from console logging

========
THis is my idea for implementation of the TTS

The way it works is that you an article whose speech has alreay been generated will have article.text_to_speech
if not you call the api to generate it

I am think that for articles, we can keep what I have instead (look at article titled: Advancements in AI Technology: Transforming the Future
) to see how it looks;
I have put it in ArticleAudioControls.tsx

Now I think for short posts, it can be different: since the shortform posts are read on the feed and many ot them are showing at a time,
if you you can get a situation where like 5 are plaing at the same time and you might even loose track of what you click to play. That is why
i creayed a audioprovider.tsx that handles the current playing post so if you click another post, if anyone was playing it stops and the current one plays. That is what I hoped to implement in ReadingControls.tsx but it is not complete

- No top bar on article view page
- save next to author + share
- Floating reaction for actions (save, share, )
- Two input fields on comments
- Differentiation between comments and sub-comment
- Tag user for reply to reply
- Tagging users
- Limit possible emojis
- Policy for expletives (article + pos)
- Complete freedom of spech - send articles with expletives to admin
- Edit+(Delete postponed) posts/articles
- Very sensitive to expletives in comments
- https://unrealspeech.com/studio
- Less invasive notification for post
- Notifications sound
- reepls dashboard

- Reading History
- Vocabulary

- position the modal for reactions
- Reporting
- tylenol, ibuprofen, dayquill

- Somehow auth still has lots of issues
- Still receiving useless messages like respinse fail with .. instead of useful erros

- Tag input
